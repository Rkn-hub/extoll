<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Project Details - Extoll.Co</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<style>
    #project-galley{
        margin-bottom: 15%;   
    }
    #project-hero{
        margin-bottom: 15%;   
    }
  .glow-underline {
    position: relative;
    display: inline-block;
    margin-bottom: 15%;
  }

  .glow-underline::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #00aaff;
    box-shadow: 0 0 10px #00aaff, 0 0 20px #00aaff, 0 0 30px #00aaff;
    
  }
  .glassmorphism-card {
    background: rgba(20, 29, 35, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 170, 255, 0.2);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    
  }
  
  .sparkle-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }

  /* Navigation logo preload */
  .nav-logo {
    opacity: 1;
    transition: opacity 0.2s ease;
  }

  /* Smooth navigation transitions */
  .nav-link {
    transition: all 0.2s ease;
    position: relative;
  }
  
  .nav-link:hover {
    color: #00aaff;
    transform: translateY(-1px);
  }
  
  /* Add subtle underline effect on hover */
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: #00aaff;
    transition: width 0.2s ease;
  }
  
  .nav-link:hover::after {
    width: 100%;
  }

  /* Cursor styles for all interactive elements */
  button,
  .cursor-pointer,
  .nav-link,
  .glassmorphism-card,
  [onclick],
  a[href] {
    cursor: pointer !important;
  }

  /* Ensure disabled buttons show not-allowed cursor */
  button:disabled {
    cursor: not-allowed !important;
  }
  
  /* Text alignment and formatting improvements */
  #project-description {
    text-align: left !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    white-space: pre-wrap !important;
    line-height: 1.7 !important;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Ensure proper text rendering for all text elements */
  p, h1, h2, h3, h4, h5, h6 {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  .sparkle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: radial-gradient(circle, rgba(0, 170, 255, 0.9) 0%, rgba(0, 170, 255, 0.5) 40%, transparent 100%);
    border-radius: 50%;
    animation: sparkleFloat 12s infinite cubic-bezier(0.25, 0.46, 0.45, 0.94);
    opacity: 0;
    will-change: transform, opacity;
  }
  
  @keyframes sparkleFloat {
    0% {
      transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0);
      opacity: 0;
    }
    50% {
      transform: translateY(50vh) translateX(10px) rotate(180deg) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-5vh) translateX(0px) rotate(360deg) scale(0);
      opacity: 0;
    }
  }
</style>

<script id="tailwind-config">
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          "primary": "#00aaff",
          "background-light": "#0A0A0D",
          "background-dark": "#0A0A0D",
        },
        fontFamily: {
          "display": ["Space Grotesk", "sans-serif"]
        },
        borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
      },
    },
  }
</script>
</head>
<body class="bg-background-dark font-display text-gray-300">
<!-- Sparkle Background Effect -->
<div class="sparkle-container" id="sparkleContainer"></div>

<div class="relative flex min-h-screen w-full flex-col">
<div class="layout-container flex h-full grow flex-col">
<div class="px-4 sm:px-10 md:px-20 lg:px-40 flex flex-1 justify-center py-5">
<div class="layout-content-container flex flex-col w-full max-w-[960px] flex-1">

<!-- Header -->
<header class="w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-5">
  <div class="flex items-center justify-between whitespace-nowrap border-b border-solid border-white/10 px-6 py-3">
    <a href="index.html" class="flex items-center gap-4 text-white hover:opacity-80 transition-opacity cursor-pointer">
      <img src="logo.png" alt="Extoll.Co Logo" class="nav-logo h-8 w-8 object-contain" id="navLogo">
      <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Extoll.Co</h2>
    </a>
    <nav class="hidden md:flex flex-1 justify-end gap-8">
      <div class="flex items-center gap-9">
        <a class="nav-link text-white/70 hover:text-white transition-colors text-sm font-medium leading-normal" href="index.html">Home</a>
        <a class="nav-link text-white/70 hover:text-white transition-colors text-sm font-medium leading-normal" href="portfolio.html">Portfolio</a>
        <a class="nav-link text-white/70 hover:text-white transition-colors text-sm font-medium leading-normal" href="services.html">Services</a>
        <a class="nav-link text-white/70 hover:text-white transition-colors text-sm font-medium leading-normal" href="about.html">About</a>
      </div>
      <a href="contact.html">
        <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em] hover:opacity-90 transition-opacity">
          <span class="truncate">Contact Me</span>
        </button>
      </a>
    </nav>
  </div>
</header>

<!-- Main Content -->
<main class="flex-1 py-16 sm:py-20 md:py-24">
<div class="flex flex-col gap-16 sm:gap-20 md:gap-24">

<!-- Project Not Found Message (Hidden by default) -->
<div id="project-not-found" class="hidden text-center px-4 py-20">
<div class="glassmorphism-card p-12 rounded-xl max-w-md mx-auto">
<div class="text-6xl mb-6">üîç</div>
<h1 class="text-3xl font-bold text-white mb-4">Project Not Found</h1>
<p class="text-gray-400 mb-6">The project you're looking for doesn't exist or hasn't been added yet.</p>
<a href="index.html#work" class="inline-block bg-primary text-white px-6 py-3 rounded-lg font-bold hover:bg-primary/90 transition-colors">
Back to Portfolio
</a>
</div>
</div>

<!-- Project Content (Hidden by default, shown when project loads) -->
<div id="project-content" class="hidden">

<!-- Project Title -->
<section class="text-center px-4">
<h1 class="text-white text-4xl sm:text-5xl md:text-6xl font-black leading-tight tracking-tighter" id="project-title">
<span class="glow-underline" style="margin-bottom: 20%;">Loading...</span>
</h1>
</section>

<!-- Project Hero Image -->
<section class="px-4">
<div class="w-5/6 max-w-5xl mx-auto bg-center bg-no-repeat bg-contain flex flex-col justify-end overflow-hidden rounded-xl min-h-[350px] md:min-h-[420px] lg:min-h-[500px] shadow-[0_10px_40px_rgba(0,170,255,0.1)]" id="project-hero">
<!-- Hero image will be set via JavaScript -->
</div>
</section>

<!-- Project Gallery -->
<section class="px-4" id="project-gallery">
<h2 class="text-white text-2xl sm:text-3xl font-bold leading-tight tracking-tight mb-6">Project Gallery</h2>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="gallery-grid">
<!-- Gallery images will be populated by JavaScript -->
</div>
</section>

<!-- Project Description -->
<section class="px-4" style="margin-top: 15%; margin-bottom: 15%;">
<h2 class="text-white text-2xl sm:text-3xl font-bold leading-tight tracking-tight mb-6">Project Overview</h2>
<div class="glassmorphism-card p-6 rounded-xl">
<p class="text-gray-300 text-base sm:text-lg font-normal leading-relaxed text-left break-words whitespace-pre-wrap" id="project-description" style="word-wrap: break-word; overflow-wrap: break-word; text-align: left; line-height: 1.7;">
Loading project description...
</p>
</div>
</section>

<!-- Call to Action -->
<section class="bg-gradient-to-t from-primary/20 to-transparent p-10 sm:p-12 md:p-16 rounded-xl text-center flex flex-col items-center gap-6 border border-primary/20">
<h2 class="text-white text-3xl sm:text-4xl font-black leading-tight tracking-tight max-w-lg">Hire Me for Your Project</h2>
<p class="text-gray-400 max-w-xl">
Have a similar project in mind? I'm available for freelance work. Let's create something exceptional together.
</p>
<a href="contact.html">
<button class="flex min-w-[180px] mt-4 max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-8 bg-primary text-white text-base font-bold leading-normal tracking-wide hover:bg-primary/90 transition-all duration-300 hover:shadow-[0_0_25px_rgba(0,170,255,0.6)]">
<span class="truncate">Get in Touch</span>
</button>
</a>
</section>

</div> <!-- End project-content -->
</div>
</main>
</div>
</div>
</div>
</div>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="supabase-config.js"></script>
<script src="website-assets.js"></script>
<script>
console.log('Project page script loaded successfully');

document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, starting project page initialization...');
    
    // Load logo
    loadLogo();
    
    // Initialize Supabase
    if (!initializeSupabase()) {
        console.error('Failed to initialize Supabase, falling back to localStorage');
        loadFromLocalStorage();
        return;
    }
    
    // Get project parameter from URL
    const urlParams = new URLSearchParams(window.location.search);
    const projectKey = urlParams.get('project');
    
    console.log('Project key from URL:', projectKey);
    console.log('Full URL:', window.location.href);
    
    if (!projectKey) {
        console.log('No project key in URL');
        showProjectNotFound();
        return;
    }
    
    // Load project from Supabase
    loadProjectFromSupabase(projectKey);
    
    // Initialize sparkle effect
    initializeSparkleEffect();
});

async function loadProjectFromSupabase(projectKey) {
    const result = await getProjectByKey(projectKey);
    
    if (result.success) {
        console.log('Found project:', result.data);
        loadProject(result.data);
    } else {
        console.log('Project not found in Supabase, trying localStorage');
        loadFromLocalStorage(projectKey);
    }
}

function loadFromLocalStorage(projectKey) {
    // Fallback to localStorage
    const projects = JSON.parse(localStorage.getItem('projects') || '[]');
    console.log('Loaded projects from localStorage:', projects);
    console.log('Number of projects:', projects.length);
    
    // Debug: Show all project keys
    projects.forEach(p => {
        console.log('Available project key:', p.key, 'Title:', p.title);
    });
    
    // Find the specific project
    const project = projects.find(p => p.key === projectKey);
    
    if (!project) {
        console.log('Project not found with key:', projectKey);
        console.log('Available keys:', projects.map(p => p.key));
        showProjectNotFound();
        return;
    }
    
    // Convert localStorage format to Supabase format
    const supabaseProject = {
        id: project.id,
        title: project.title,
        key: project.key,
        category: project.category,
        description: project.description,
        count: project.count,
        thumbnail_url: project.thumbnailDataUrl,
        created_at: project.createdAt,
        project_images: project.images || [],
        project_videos: project.videos || []
    };
    
    console.log('Found project:', supabaseProject);
    loadProject(supabaseProject);
}

function showProjectNotFound() {
    document.getElementById('project-not-found').classList.remove('hidden');
    document.getElementById('project-content').classList.add('hidden');
}

function loadProject(project) {
    console.log('Loading project:', project.title);
    
    // Show project content
    document.getElementById('project-content').classList.remove('hidden');
    document.getElementById('project-not-found').classList.add('hidden');
    
    // Update page title
    document.title = `${project.title} - Extoll.Co`;
    
    // Update project title
    document.getElementById('project-title').innerHTML = `<span class="glow-underline">${project.title}</span>`;
    
    // Update hero image
    const heroElement = document.getElementById('project-hero');
    if (project.thumbnail_url) {
        heroElement.style.backgroundImage = `url(${project.thumbnail_url})`;
        heroElement.style.backgroundSize = 'cover';
        heroElement.style.backgroundPosition = 'center';
    } else {
        // Create a gradient background with category icon
        const categoryIcons = {
            'graphics': 'üé®',
            'ui': 'üì±',
            'product': 'üíº',
            'animation': 'üé¨',
            'video': 'üé•'
        };
        
        const icon = categoryIcons[project.category] || 'üìÅ';
        heroElement.innerHTML = `
            <div class="w-full h-full bg-gradient-to-br from-primary/30 to-primary/10 flex items-center justify-center">
                <div class="text-center">
                    <div class="text-8xl mb-4">${icon}</div>
                    <h3 class="text-white text-2xl font-bold">${project.title}</h3>
                </div>
            </div>
        `;
    }
    
    // Update project description with proper formatting
    const descriptionElement = document.getElementById('project-description');
    const description = project.description || 'No description available for this project.';
    descriptionElement.textContent = description;
    
    // Load actual project files from Supabase storage
    loadProjectFilesFromStorage(project.key, project.category);
}

// Load actual project files from Supabase storage
async function loadProjectFilesFromStorage(projectKey, projectCategory) {
    const galleryGrid = document.getElementById('gallery-grid');
    
    // Show loading state
    galleryGrid.innerHTML = `
        <div class="col-span-full glassmorphism-card p-12 rounded-xl text-center">
            <div class="text-4xl mb-4">‚è≥</div>
            <h3 class="text-white text-xl font-bold mb-2">Loading Project Files...</h3>
            <p class="text-gray-400">Fetching images and videos from storage...</p>
        </div>
    `;
    
    try {
        console.log('üîç Loading files for project:', projectKey);
        
        // List files in the project folder
        const { data: files, error } = await configSupabase.storage
            .from(SUPABASE_CONFIG.bucket)
            .list(projectKey, {
                limit: 1000,
                sortBy: { column: 'created_at', order: 'desc' }
            });
        
        if (error) {
            console.error('‚ùå Error loading project files:', error);
            showNoFilesMessage();
            return;
        }
        
        if (!files || files.length === 0) {
            console.log('üìÅ No files found for project:', projectKey);
            showNoFilesMessage();
            return;
        }
        
        console.log('‚úÖ Found', files.length, 'files for project:', projectKey);
        
        // Filter out logo, banner, thumbnail files, and JSON files
        const filteredFiles = files.filter(file => {
            const fileName = file.name.toLowerCase();
            // Exclude logo files, banner files, thumbnails, and JSON files
            return !fileName.startsWith('logo') && 
                   !fileName.startsWith('banner') && 
                   !fileName.startsWith('thumb-') &&
                   !fileName.includes('/logo/') &&
                   !fileName.includes('/banner/') &&
                   !fileName.endsWith('.json') &&
                   fileName !== 'logo.png' &&
                   fileName !== 'banner.jpg' &&
                   fileName !== 'banner.png' &&
                   fileName !== 'project.json';
        });
        
        console.log('üîç Filtered files:', {
            original: files.length,
            filtered: filteredFiles.length,
            excluded: files.length - filteredFiles.length
        });
        
        // Process filtered files and get public URLs
        const projectFiles = filteredFiles.map(file => {
            const filePath = `${projectKey}/${file.name}`;
            const { data: urlData } = configSupabase.storage
                .from(SUPABASE_CONFIG.bucket)
                .getPublicUrl(filePath);
            
            return {
                name: file.name,
                path: filePath,
                url: urlData.publicUrl,
                type: getFileType(file.name),
                size: file.metadata?.size || 0,
                created_at: file.created_at
            };
        });
        
        // Separate images and videos
        const images = projectFiles.filter(f => f.type === 'image');
        const videos = projectFiles.filter(f => f.type === 'video');
        
        console.log('üìä File breakdown:', {
            total: projectFiles.length,
            images: images.length,
            videos: videos.length
        });
        
        // Store files globally for navigation
        window.currentProjectFiles = projectFiles;
        window.currentProjectImages = images; // Store only images for lightbox
        
        // Create gallery
        if (projectFiles.length > 0) {
            // Generate gallery items with unified lightbox for all media
            galleryGrid.innerHTML = projectFiles.map((file, index) => {
                if (file.type === 'image') {
                    return `
                        <div class="glassmorphism-card rounded-xl overflow-hidden aspect-square relative group cursor-pointer" onclick="openLightbox(${index})">
                            <img src="${file.url}" alt="Project Image ${index + 1}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" loading="lazy">
                            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100">
                                <div class="text-white text-2xl">üîç</div>
                            </div>
                        </div>
                    `;
                } else if (file.type === 'video') {
                    return `
                        <div class="glassmorphism-card rounded-xl overflow-hidden aspect-square relative group cursor-pointer" onclick="openLightbox(${index})">
                            <video class="w-full h-full object-cover" preload="metadata">
                                <source src="${file.url}" type="video/mp4">
                            </video>
                            <div class="absolute inset-0 bg-black/50 flex items-center justify-center group-hover:bg-black/30 transition-all duration-300">
                                <div class="text-white text-4xl">‚ñ∂Ô∏è</div>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="glassmorphism-card rounded-xl overflow-hidden aspect-square flex items-center justify-center bg-gray-800">
                            <div class="text-center">
                                <div class="text-4xl mb-2">üìÑ</div>
                                <p class="text-white text-sm">Document</p>
                            </div>
                        </div>
                    `;
                }
            }).join('');
        } else {
            showNoFilesMessage();
        }
        
    } catch (error) {
        console.error('‚ùå Error loading project files:', error);
        showNoFilesMessage();
    }
}

function updateProjectCount(count, category) {
    const countElement = document.getElementById('project-count');
    const fileType = (category === 'animation' || category === 'video') ? 'Files' : 'Images';
    countElement.textContent = `${count} ${fileType}`;
}

function showNoFilesMessage() {
    const galleryGrid = document.getElementById('gallery-grid');
    galleryGrid.innerHTML = `
        <div class="col-span-full glassmorphism-card p-12 rounded-xl text-center">
            <div class="text-4xl mb-4">üì∑</div>
            <h3 class="text-white text-xl font-bold mb-2">No Files Yet</h3>
            <p class="text-gray-400">Project files will appear here when uploaded through the admin panel.</p>
        </div>
    `;
}

function getFileType(fileName) {
    const extension = fileName.split('.').pop().toLowerCase();
    
    if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'].includes(extension)) {
        return 'image';
    } else if (['mp4', 'webm', 'mov', 'avi', 'mkv'].includes(extension)) {
        return 'video';
    } else {
        return 'other';
    }
}

function openLightbox(startIndex, mediaType = 'image') {
    // Get all media files (images and videos) for unified navigation
    const allMediaFiles = window.currentProjectFiles ? 
        window.currentProjectFiles.filter(f => f.type === 'image' || f.type === 'video') : [];
    
    if (allMediaFiles.length === 0) return;
    
    let currentIndex = startIndex;
    
    // Create lightbox modal
    const lightbox = document.createElement('div');
    lightbox.className = 'fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4';
    lightbox.id = 'lightbox-modal';
    
    function updateLightboxContent() {
        const currentFile = allMediaFiles[currentIndex];
        const isVideo = currentFile.type === 'video';
        
        lightbox.innerHTML = `
            <div class="relative max-w-6xl max-h-full flex items-center justify-center">
                <!-- Main Media Content -->
                ${isVideo ? `
                    <video controls class="max-w-full max-h-full" autoplay>
                        <source src="${currentFile.url}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                ` : `
                    <img src="${currentFile.url}" alt="Project Image" class="max-w-full max-h-full object-contain">
                `}
                
                <!-- Close Button -->
                <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white text-3xl bg-black/70 rounded-full w-12 h-12 flex items-center justify-center hover:bg-black/90 transition-all duration-200 z-10">
                    √ó
                </button>
                
                <!-- Previous Button -->
                ${allMediaFiles.length > 1 ? `
                    <button onclick="previousMedia()" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-2xl bg-black/70 rounded-full w-12 h-12 flex items-center justify-center hover:bg-black/90 transition-all duration-200 z-10 ${currentIndex === 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                        ‚Äπ
                    </button>
                ` : ''}
                
                <!-- Next Button -->
                ${allMediaFiles.length > 1 ? `
                    <button onclick="nextMedia()" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-2xl bg-black/70 rounded-full w-12 h-12 flex items-center justify-center hover:bg-black/90 transition-all duration-200 z-10 ${currentIndex === allMediaFiles.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}">
                        ‚Ä∫
                    </button>
                ` : ''}
                
                <!-- Media Counter and Type Indicator -->
                ${allMediaFiles.length > 1 ? `
                    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black/70 px-4 py-2 rounded-full text-sm flex items-center gap-2">
                        <span class="text-xs ${isVideo ? 'text-blue-400' : 'text-green-400'}">${isVideo ? 'üé•' : 'üñºÔ∏è'}</span>
                        ${currentIndex + 1} / ${allMediaFiles.length}
                    </div>
                ` : ''}
            </div>
        `;
    }
    
    // Global functions for navigation
    window.closeLightbox = function() {
        lightbox.remove();
        delete window.closeLightbox;
        delete window.previousMedia;
        delete window.nextMedia;
        // Legacy cleanup for backward compatibility
        delete window.previousImage;
        delete window.nextImage;
    };
    
    window.previousMedia = function() {
        if (currentIndex > 0) {
            currentIndex--;
            updateLightboxContent();
        }
    };
    
    window.nextMedia = function() {
        if (currentIndex < allMediaFiles.length - 1) {
            currentIndex++;
            updateLightboxContent();
        }
    };
    
    // Legacy function names for backward compatibility
    window.previousImage = window.previousMedia;
    window.nextImage = window.nextMedia;
    
    // Keyboard navigation
    function handleKeyPress(e) {
        switch(e.key) {
            case 'Escape':
                window.closeLightbox();
                break;
            case 'ArrowLeft':
                if (currentIndex > 0) window.previousMedia();
                break;
            case 'ArrowRight':
                if (currentIndex < allMediaFiles.length - 1) window.nextMedia();
                break;
        }
    }
    
    document.addEventListener('keydown', handleKeyPress);
    
    // Remove keyboard listener when lightbox closes
    const originalClose = window.closeLightbox;
    window.closeLightbox = function() {
        document.removeEventListener('keydown', handleKeyPress);
        originalClose();
    };
    
    // Close on click outside (but not on video controls)
    lightbox.addEventListener('click', function(e) {
        if (e.target === lightbox) {
            window.closeLightbox();
        }
    });
    
    updateLightboxContent();
    document.body.appendChild(lightbox);
}

// Helper function to get display names for categories
function getCategoryDisplayName(category) {
    const categoryMap = {
        'graphics': 'Graphics Design',
        'ui': 'UI/UX Design',
        'product': 'Product Design',
        'animation': '2D Animation',
        'video': 'Video Editing'
    };
    return categoryMap[category] || category;
}

// Sparkle Background Effect
function initializeSparkleEffect() {
    const sparkleContainer = document.getElementById('sparkleContainer');
    if (!sparkleContainer) return;
    
    const numberOfSparkles = 20;
    
    function createSparkle() {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        
        // Random horizontal position
        sparkle.style.left = Math.random() * 100 + '%';
        
        // Random animation delay
        sparkle.style.animationDelay = (Math.random() * 12) + 's';
        
        sparkleContainer.appendChild(sparkle);
        
        // Remove sparkle after animation completes
        setTimeout(() => {
            if (sparkle.parentNode) {
                sparkle.parentNode.removeChild(sparkle);
            }
        }, 12000);
    }
    
    // Create initial sparkles
    for (let i = 0; i < numberOfSparkles; i++) {
        setTimeout(() => createSparkle(), Math.random() * 5000);
    }
    
    // Continuously create new sparkles
    setInterval(() => {
        if (sparkleContainer.children.length < numberOfSparkles * 1.5) {
            createSparkle();
        }
    }, 800);
}

// Load logo from Supabase with fallback to old location
function loadLogo() {
  if (!initializeSupabase()) {
    return;
  }
  
  const supabase = configSupabase;
  
  // Try new location first, then fallback to old location
  Promise.all([
    supabase.storage.from(SUPABASE_CONFIG.bucket).list(`${SUPABASE_CONFIG.websiteAssets.folder}/${SUPABASE_CONFIG.websiteAssets.subfolders.logo}`),
    supabase.storage.from(SUPABASE_CONFIG.bucket).list('logo') // Fallback to old location
  ]).then(function([newLogoResult, oldLogoResult]) {
    let logoResult = newLogoResult;
    let logoPath = `${SUPABASE_CONFIG.websiteAssets.folder}/${SUPABASE_CONFIG.websiteAssets.subfolders.logo}`;
    
    // If new location fails or is empty, use old location
    if (newLogoResult.error || !newLogoResult.data || newLogoResult.data.length === 0) {
      console.log('üìÅ Logo not found in new location, trying old location...');
      logoResult = oldLogoResult;
      logoPath = 'logo';
    }
    
    if (logoResult.data && logoResult.data.length > 0) {
      const logoFile = logoResult.data[0].name;
      const logoUrl = supabase.storage
        .from(SUPABASE_CONFIG.bucket)
        .getPublicUrl(`${logoPath}/${logoFile}`);
      
      if (logoUrl.data && logoUrl.data.publicUrl) {
        const logoElement = document.getElementById('navLogo');
        if (logoElement) {
          logoElement.src = logoUrl.data.publicUrl;
          console.log('‚úÖ Logo loaded from:', logoPath);
        }
      }
    } else {
      console.log('‚ö†Ô∏è No logo found in either location');
    }
  })
  .catch(function(error) {
    console.error('‚ùå Error loading logo:', error);
  });
}
</script>

</body>
</html>